<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{% block title %}Steam 好友工具{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    {% block extra_head %}{% endblock %}
</head>
<body>
    <!-- 🔗 功能導航區 -->
    <div style="margin-bottom: 1em;">
        <strong>功能選單：</strong>
        <a href="/">好友清單</a> |
        <a href="/history">變更紀錄</a> |
        <a href="/country">國別分析</a> |
        <a href="/country-chart">國別統計圖</a> |
        <a href="/trend">好友趨勢圖</a> |
        <a href="/status-board">好友狀態看板</a> |
        <a href="/achievement">成就查詢</a> |		
        <a href="/filter">條件篩選</a> |
		<a href="/backups">備份管理</a> |
        <a href="/update">更新資料 (背景自動定期更新、非必要)</a> |
    </div>

    {% block content %}{% endblock %}

	{% block extra_script %}
	<script>
	function formatLocalTime(ts) {
		const date = new Date(ts * 1000);
		return date.toLocaleString('zh-TW', {
			year: 'numeric',
			month: 'numeric',
			day: 'numeric',
			hour: '2-digit',
			minute: '2-digit',
			second: '2-digit',
			hourCycle: 'h23'
		});
	}
	function formatAgo(ts) {
		const now = new Date();
		const then = new Date(ts * 1000);
		const diff = Math.floor((now - then) / 1000);
		if (diff < 60) return `${diff} 秒前`;
		if (diff < 3600) return `${Math.floor(diff / 60)} 分鐘前`;
		if (diff < 86400) return `${Math.floor(diff / 3600)} 小時前`;
		return `${Math.floor(diff / 86400)} 天前`;
	}
	function updateAllTimestamps() {
		document.querySelectorAll('.datetime-auto').forEach(el => {
			const ts = parseInt(el.dataset.timestamp, 10);
			if (!isNaN(ts)) {
				el.innerText = formatLocalTime(ts) + '（' + formatAgo(ts) + '）';
			}
		});
	}
	document.addEventListener('DOMContentLoaded', updateAllTimestamps);
	</script>
	{% endblock %}
</body>
</html>
