<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>好友國別分析 - Steam 好友追蹤系統</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Steam 好友追蹤系統 - 國別分析</h1>

        <div>
            排序：
            {% if sort_mode == 'count' %}
                <b>人數</b> |
                <a href="/country?sort=name">國名</a>
            {% else %}
                <a href="/country?sort=count">人數</a> |
                <b>國名</b>
            {% endif %}
        </div>

        <ul class="country-list">
            {% for code, count in sorted_items %}
                <li>
                    <details>
                        <summary>
                            <strong>{{ code }}</strong>：{{ count }} 人
                        </summary>
                        <ul class="friend-list">
                            {% for friend in country_members[code] %}
                                <li class="friend-item">
                                    <a href="{{ friend.profile_url }}" target="_blank" style="display: flex; text-decoration: none; color: inherit;">
                                        <img src="{{ friend.avatar if friend.avatar else '/static/default-avatar.png' }}" alt="avatar">
                                        <div class="friend-info">
                                            <strong>{{ friend.persona_name or '[未知名稱]' }}</strong><br>
                                            <small>加入於 {{ friend.friend_since | datetimeformat }}</small>
                                        </div>
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </details>
                </li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>
