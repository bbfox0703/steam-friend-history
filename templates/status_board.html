<!DOCTYPE html>
<html>
<head>
    <title>好友狀態看板</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>好友狀態看板</h1>
        <!-- 🔗 功能導航區 -->
        <div style="margin-bottom: 1em;">
            <strong>功能選單：</strong>
            <a href="/">好友清單</a> |
            <a href="/history">變更紀錄</a> |
            <a href="/country">國別分析</a> |
            <a href="/country-chart">國別統計圖</a> |
            <a href="/trend">好友趨勢圖</a> |
            好友狀態看板 |
            <a href="/filter">條件篩選</a> |
            <a href="/update">更新好友資料 (非必要)</a> |
        </div>	
    <table>
        <thead>
            <tr>
                <th>暱稱</th>
                <th>國家</th>
                <th>目前狀態</th>
                <th>最後上線</th>
                <th>Steam 頭像</th>
            </tr>
        </thead>
        <tbody>
            {% for f in friends %}
            <tr class="{{ 'online' if f.personastate != 0 else 'offline' }}">
                <td><a href="{{ f.profile_url }}" target="_blank">{{ f.persona_name }}</a></td>
                <td>{{ f.country_code }}</td>
                <td>{{ status_map.get(f.personastate, '未知') }}</td>
                <td>
                    {% if f.lastlogoff %}
                        {{ f.lastlogoff | datetimeformat }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td><img src="{{ f.avatar }}" width="40"></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
